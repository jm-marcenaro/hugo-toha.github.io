<!doctype html><html lang=en><head><title>GFS Dashboard</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.8ada0adf414ffbd79c611fc0b3117cce3a146334de8d2d4385d02887232cb051.css integrity="sha256-itoK30FP+9ecYR/AsxF8zjoUYzTejS1DhdAohyMssFE="><meta property="og:url" content="https://hugo-toha.github.io/posts/nodejs/nodejs_1/"><meta property="og:site_name" content="Juan's Blog"><meta property="og:title" content="GFS Dashboard"><meta property="og:description" content="GFS Dashboard served through Node.js"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-09-26T00:00:00+00:00"><meta property="article:modified_time" content="2024-09-26T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="GFS Dashboard"><meta name=twitter:description content="GFS Dashboard served through Node.js"><meta name=description content="GFS Dashboard served through Node.js"><script data-goatcounter=https://114794.goatcounter.com/count async src=//gc.zgo.at/count.js></script><script>theme=localStorage.getItem("darkmode:color-scheme")||"system",theme=="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/>Juan's Blog</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/#home>Home</a></li><li class=nav-item><a class=nav-link href=/#about>About</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/posts>Posts</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>Posts</a></li><div class=subtree><li><i data-feather=plus-circle></i><a class=list-link href=/posts/gee/> GEE</a><ul><li><a class=list-link href=/posts/gee/ndvi-ppt-etr/ndvi-ppt-etr_1/ title="NDVI, Ppt and ETr">NDVI, Ppt and ETr</a></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/gee/chirps/> CHIRPS</a><ul><li><a class=list-link href=/posts/gee/chirps/chirps_1/ title="CHIRPS Part 1">CHIRPS Part 1</a></li><li><a class=list-link href=/posts/gee/chirps/chirps_2/ title="CHIRPS Part 2">CHIRPS Part 2</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/gee/gfs/> GFS</a><ul><li><a class=list-link href=/posts/gee/gfs/gfs_1/ title="GFS Part 1">GFS Part 1</a></li><li><a class=list-link href=/posts/gee/gfs/gfs_2/ title="GFS Part 2">GFS Part 2</a></li></ul></li></ul></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/posts/nodejs/> Node.js</a><ul class=active><li><a class="active list-link" href=/posts/nodejs/nodejs_1/ title="GFS Dashboard">GFS Dashboard</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/qgis/> QGIS</a><ul><li><a class=list-link href=/posts/qgis/qgis_1/ title="Batch Processing">Batch Processing</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/images/default-hero.jpg)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/author/john_hu14889220175809877743.png alt="Author Image"><h5 class=author-name>Juan Martín Marcenaro</h5><p class=text-muted>Thursday, September 26, 2024</p></div><div class=title><h1>GFS Dashboard</h1></div><div class=post-content id=post-content><h2 id=project-overview>Project Overview</h2><p>In this opportunity we&rsquo;ll go over a project developed through the combination of Google Earth Engine and Node.js. Data we&rsquo;ll be retrieved and processed through GEE Python API and afterwards served to a local dashboard using Node.js</p><p>We’ll walk through:</p><ul><li>Retrieving and processing data from Google Earth Engine using Python,</li><li>serving this data through a local Node.js server and,</li><li>building a responsive dashboard for data visualization.</li></ul><p>By the end of this project, you’ll learn how to integrate these powerful tools to visualize complex geospatial datasets in real time. The project is reproducible and available on my <a href=https://github.com/jm-marcenaro/GFS-Dashboard target=_blank rel=noopener>Github repository</a> so you can follow along.</p><p>Here’s a preview of the final dashboard. It features a table and several time series plots that display forecast data for multiple climatic variables in the city of Buenos Aires.</p><div style=margin-top:1rem></div><img src=images/_01.png class=center><div style=margin-top:1rem></div><h2 id=project-structure>Project structure</h2><p>The project structure is shown below. The main directories are:</p><ul><li><strong>DB</strong>: Contains the Python script that retrieves and stores data from GEE, along with the database file itself.</li><li><strong>public</strong>: Contains the HTML structure, JavaScript for interactivity, and CSS for styling.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>/.
</span></span><span style=display:flex><span>│
</span></span><span style=display:flex><span>├── DB/                     
</span></span><span style=display:flex><span>│   ├── DBS-BD-LOG.txt       <span style=color:#75715e># Log file</span>
</span></span><span style=display:flex><span>│   ├── GFS-DB.bat           <span style=color:#75715e># Batch script for DB</span>
</span></span><span style=display:flex><span>│   ├── GFS-DB.db            <span style=color:#75715e># Database file</span>
</span></span><span style=display:flex><span>│   ├── GFS-DB.py            <span style=color:#75715e># Python script for DB</span>
</span></span><span style=display:flex><span>│   ├── GFS-DB.vbs           <span style=color:#75715e># VBS script for DB</span>
</span></span><span style=display:flex><span>│
</span></span><span style=display:flex><span>├── images/                 
</span></span><span style=display:flex><span>├── node_modules/           
</span></span><span style=display:flex><span>├── public/                 
</span></span><span style=display:flex><span>│   ├── style/               <span style=color:#75715e># CSS styles</span>
</span></span><span style=display:flex><span>│   ├── index.html           <span style=color:#75715e># Main HTML file</span>
</span></span><span style=display:flex><span>│   ├── plot.js              <span style=color:#75715e># JavaScript for plotting data</span>
</span></span><span style=display:flex><span>│   ├── table.js             <span style=color:#75715e># JavaScript for table functionality</span>
</span></span><span style=display:flex><span>│
</span></span><span style=display:flex><span>├── package.json            
</span></span><span style=display:flex><span>├── package-lock.json       
</span></span><span style=display:flex><span>├── README.md               
</span></span><span style=display:flex><span>├── server.bat              
</span></span><span style=display:flex><span>├── server.js               <span style=color:#75715e># Node.js server               </span>
</span></span><span style=display:flex><span>├── server.vbs              <span style=color:#75715e># Triggers the server through the task scheduler</span>
</span></span></code></pre></div><h2 id=retrieving-data-from-gee-python-api>Retrieving data from GEE Python API</h2><p>Shortly, the Python script <em>GFS-DB.py</em> retrieves the latest available weather forecast data for Buenos Aires from Google Earth Engine, processes it, and stores the results in a SQLite database. I’ve previously written more about this dataset, which you can check out <a href=https://jm-marcenaro.github.io/hugo-toha.github.io/posts/gee/gfs/ target=_blank rel=noopener>here.</a></p><p>The script starts by defining the region of interest and collects weather data (temperature, humidity, wind speed, direction, cloud cover, and precipitation) for the next 120 hours.</p><p>Using the XEE library (learn more <a href=https://github.com/google/Xee target=_blank rel=noopener>here</a>), the weather data is processed into a more usable format and organized into a pandas DataFrame. The final output is stored in a SQLite database, making it easily accessible for future use by the server.</p><p>Additionally, logging is included to track the process, and the Python script is automatically triggered every 3 hours via Windows Task Scheduler (or a cron job in Linux).</p><h2 id=serving-through-a-local-nodejs-server>Serving through a local Node.js server</h2><p>The <em>server.js</em> script initializes an Express application to serve static files and interact with the SQLite database <em>GFS-DB.db</em> we&rsquo;ve previously created. It then sets up a GET route at <em>/data</em> to retrieve all records from the database table. Upon success, it responds with a JSON object containing the forecast data. The server listens on a specified port, providing a straightforward API for accessing this data, which can be integrated with the JavaScript code that we&rsquo;ll explore next.</p><h2 id=building-a-responsive-dashboard-for-data-visualization>Building a responsive dashboard for data visualization.</h2><p>The dashboard is built using a combination of HTML, JavaScript, and CSS. Let’s break it up and explore what each component does:</p><h4 id=html>HTML</h4><p>The HTML file, index.html, defines the structure and functionality of the dashboard. It includes links to styles and libraries such as jQuery, DataTables, and Chart.js to enhance interactivity and visualization.</p><p>At the top, a table is created to display weather variables, which will be populated with data through the table.js script. Below the table, various canvas elements are provided for plotting charts, which will also be filled with data via the plot.js file.</p><h4 id=javascript>Javascript</h4><p>The <em>table.js</em> script is in charge of populating with data the dashboard table. It uses the Fetch API to asynchronously retrieve data from the server at the <em>/data</em> endpoint.</p><p>The script formats numerical values for better readability and dynamically constructs table rows and cells to display the weather variables. Besides, it identifies which record is closest to the current date and time. This closest record is highlighted in the table for easy reference.</p><p>On the other hand, <em>plot.js</em> is responsible for creating dynamic visualizations using <strong>Chart.js</strong>. Similar to <em>table.js</em>, it fetches data from the server <em>/data</em> endpoint and fills multiple bar charts, each representing a different weather parameter.</p><p>Similarly, a vertical line displaying the current date and time is created to enhance readibility and provide context.</p><p>Finally, both scripts are set to refresh periodically ensuring that the dashboard reflects the most current weather conditions available.</p><h4 id=css>CSS</h4><p>The <em>styles.css</em> file contains simple CSS to style the table and arrange the layout of the bar plots into a grid. It ensures the table is easy to read and the charts well-organized.</p><h2 id=conclusion>Conclusion</h2><p>In this project, we integrated Google Earth Engine (GEE) with a Node.js server to create a dashboard that visualizes GFS weather forecast data for Buenos Aires.</p><p>We began by retrieving, processing, and storing data using the GEE Python API, along with libraries such as XEE, Pandas, and SQLite.</p><p>Afterwards, through the Node.js server, we established a connection to serve this data via a simple API.</p><p>Finally, the dashboard, created with HTML, JavaScript, and CSS, features a dynamic table and multiple bar charts that update automatically to reflect real-time conditions.</p><p>I hope you found this project interesting and remember it’s available on my <a href=https://github.com/jm-marcenaro/GFS-Dashboard target=_blank rel=noopener>GitHub repository</a></p></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/jm-marcenaro/hugo-toha.github.io/edit/main/content/posts/nodejs/nodejs_1.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/gee/gfs/gfs_2/ title="GEE Python API and Precipitation Forecasting - Part 2" class="btn filled-button"><div><i class="fas fa-chevron-circle-left"></i> Prev</div><div class=next-prev-text>GEE Python API and Precipitation Forecasting - Part 2</div></a></div><div class="col-md-6 next-article"><a href=/posts/qgis/qgis_1/ title="QGIS: Batch Processing" class="btn filled-button"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>QGIS: Batch Processing</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center ps-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#project-overview>Project Overview</a></li><li><a href=#project-structure>Project structure</a></li><li><a href=#retrieving-data-from-gee-python-api>Retrieving data from GEE Python API</a></li><li><a href=#serving-through-a-local-nodejs-server>Serving through a local Node.js server</a></li><li><a href=#building-a-responsive-dashboard-for-data-visualization>Building a responsive dashboard for data visualization.</a><ul><li><ul><li><a href=#html>HTML</a></li><li><a href=#javascript>Javascript</a></li><li><a href=#css>CSS</a></li></ul></li></ul></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://hugo-toha.github.io/#about>About</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:marcenarojuanmartin@gmail.com target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>marcenarojuanmartin@gmail.com</span></a></li><li><a href=https://github.com/jm-marcenaro target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>jm-marcenaro</span></a></li><li><a href=https://www.linkedin.com/in/juan-mart%c3%adn-marcenaro-338451192 target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Juan Martín Marcenaro</span></a></li></ul></div><div class="col-md-4 col-sm-12"><p>Stay up to date with email notification</p><form method=post action=https://blogtrottr.com><div class=form-group><input type=email class=form-control name=btr_email placeholder="Enter email"><br><input type=hidden name=btr_url value=https://hugo-toha.github.io//index.xml>
<input type=hidden name=schedule_type value=1>
<small id=emailHelp class="form-text text-muted">By entering your email address, you agree to receive the newsletter of this website.</small>
<button type=submit class="btn btn-info"> Submit</button></div></form></div></div></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu16779671404603505019.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2020 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.fe75ce808df7291053ed992c7d795288541d1eca9a369ed0f4845e687ad403de.js integrity="sha256-/nXOgI33KRBT7ZksfXlSiFQdHsqaNp7Q9IReaHrUA94=" defer></script></body></html>